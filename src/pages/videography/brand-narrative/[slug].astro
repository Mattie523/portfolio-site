---
import VideoModalLayout from '../../../components/VideoModalLayout.astro';
import { getEntry } from 'astro:content';

export async function getStaticPaths() {
	const videosEntry = await getEntry('videos', 'all');
	const allVideos = videosEntry?.data || [];
	const categoryVideos = allVideos.filter(v => v.category === 'Brand & Narrative');

	return categoryVideos.map((video) => ({
		params: { slug: video.slug },
		props: { video },
	}));
}

const { video } = Astro.props;

const videosEntry = await getEntry('videos', 'all');
const allVideos = videosEntry?.data ? [...videosEntry.data] : [];
const videos = allVideos.filter(v => v.category === 'Brand & Narrative').sort((a, b) => a.order - b.order);
---

<VideoModalLayout video={video} videos={videos} backUrl="/videography/brand-narrative" currentCategory="brand-narrative" />
